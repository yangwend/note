## 流量治理

前端流量治理，是指对前端应用的流量进行管理和控制，以提高应用的稳定性，提升用户体验。前端流量治理主要有以下几个方面：

1. **CDN 加速**：通过使用 CDN（Content Delivery Network，内容分发网络）技术，将静态资源分发到全球各地的节点上，缩短资源加载时间，降低服务器负载，提高应用的响应速度和稳定性。
2. **资源压缩**：对前端资源（如 js、css、图片等）进行压缩（常见的雪碧图）和合并，减小资源大小，提高加载速度，减少带宽消耗。
3. **图片优化**：通过使用 WEBP、JPEG 2000 等格式，对图片进行无损压缩或有损压缩，增加模糊度，减小尺寸等，从而减小图片资源的大小，提高加载速度，减少带宽消耗。
4. **懒加载**：除首屏外，其余非必须资源可以延迟加载，例如图片、视频等，减少首屏加载时间和带宽损耗。
5. **流量限制**：通过使用一些监控工具或 CDN 流量控制方式对流量进行监控，发现异常，及时处理等。防止因突然流量剧增，导致服务器宕机或页面响应特别缓慢等。
6. **接口限流**：对前端应用的接口进行限制和控制，以免接口请求过多导致服务器宕机，数据库卡死等。可以通过使用接口限流工具、缓存技术、CDN 缓存等方式来实现。
7. **异常监控**：建立完整的监控机制，针对前端页面报错等，进行监控和分析，并及时修复可能存在的风险。加强代码审查，提高应用的稳定性和健壮性。

### 缓存

可以参考：https://github.com/yangwend/note/blob/master/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A6%96%E5%B1%8F%E4%BC%98%E5%8C%96/HTTP%E7%BC%93%E5%AD%98.md

### 文件上传

文件上传时，除图片资源外，其余资源上传可不做要求。对于图片资源，除业务方要求，可以限制 2M 以内，大于 2M 则前端压缩至 2M 以内来处理。

### 文件预览

针对图片预览，可以考虑限制图片大小和模糊度等。此处可参考 ： https://help.aliyun.com/zh/oss/user-guide/latest-version-of-img-guide/?spm=a2c4g.11186623.0.0.382d10a6MTwfNz
针对非图片预览，可以考虑在线预览，如果文件太大，建议是下载后本地预览。

### js、css 等资源

打包时，做资源拆分，避免文件内容过大导致缓存失效等。

### 资源懒加载

1. 首屏渲染
2. 路由懒加载
3. 分页展示替代全部展示
4. 考虑虚拟列表应用
